<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="turn.js"></script>
    <link id="favicon" rel="shortcut icon" href="farmatodo.png">
    <link rel="icon" href="farmatodo.png" >
    <link rel="apple-touch-icon" href="farmatodo.png">
    <title>Promociones Farmatodo</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        html, body {
            margin:0; padding:0;
            width:100%; height:100%;
            overflow:hidden;
            background: linear-gradient(to bottom, #0d3b82, #0a2b5a);
            font-family: "Poppins", sans-serif;
            display:flex; justify-content:center; align-items:center;
        }

        .flipbook-container {
            max-width: min-content;
            height:81vh;
            position:relative;
            overflow:hidden;
        }

        .flipbook { overflow: hidden; }

        .flipbook img {
            width:100%;
            height:100%;
            object-fit: contain;
            display:block;
            border:none;
        }

        .page img {
            width: 100%;
            height: 100%;
            max-height: 100%;
            object-fit: fill;
        }

        .next-btn, .prev-btn {
            position: fixed;
            bottom: 50%;
            z-index: 21;
            background-color: rgba(118,183,41,0.9);
            border-radius: 100%;
            border: none;
            padding: 8px 16px;
            font-size: 21px;
            color: white;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .next-btn:hover, .prev-btn:hover {
            background-color: rgba(52,181,157,0.9);
        }

        /* posici칩n en escritorio */
        .next-btn { right: 3%; }
        .prev-btn { left: 6%; }

        /* Icono esquina superior izquierda */
        .icono {
        position: absolute;
        top: 30px;
        left: 40px;
        width: 157px;
        height: 77px;
        z-index: 9999;
        animation: pulse 3.5s infinite; /* efecto de pulso */
        }

        /* Texto esquina superior derecha */
        .lblIndicador {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(23,62,118,0.95);
        color: #fff;
        padding: 6px 10px;
        border-radius: 6px;
        font-size: 13px;
        z-index: 9999;
        opacity: 1; /* 游댳 SIEMPRE visible */
        transition: all 0.5s ease;
        }

        /* Animaci칩n de pulso */
        @keyframes pulse {
        0%   { transform: scale(1); opacity: 1; }
        50%  { transform: scale(1.3); opacity: 0.7; }
        100% { transform: scale(1); opacity: 1; }
        }

        
        @media (max-width: 1299px) {

            .flipbook-container {
                max-width: min-content;
                height:81%;
                max-height: 81vh;
                position:relative;
                overflow:hidden;
            }

            .next-btn { right: 3% !important; }
            .prev-btn { left: 4% !important; }

            /* Icono esquina superior izquierda */
            .icono {
            position: absolute;
            top: 24px;
            left: 39px;
            width: 100px;
            height: 40px;
            z-index: 9999;
            animation: pulse 4.5s infinite; /* efecto de pulso */
            }

            /* Texto esquina superior derecha */
            .lblIndicador {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(23,62,118,0.95);
            color: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 13px;
            z-index: 9999;
            opacity: 1; /* 游댳 SIEMPRE visible */
            transition: all 0.5s ease;
            }
           
        }

        /* M칩vil: flechas ocultas por defecto y mostradas con show-arrows */
        @media (max-width: 768px) {
            .flipbook { width: 100vw !important; height: 100vh !important; }

            .flipbook-container {
                max-width: min-content;
                height:100vh;
                max-height: 85vh;
                position:relative;
                overflow:hidden;
            }

            .page img { width: 100%; height: 100%; max-height: 80%; object-fit: contain; }

            .next-btn, .prev-btn {
                opacity: 0;
            }

            .flipbook-container.show-arrows .next-btn,
            .flipbook-container.show-arrows .prev-btn {
                opacity: 1;
            }

            .next-btn { right: 3% !important; }
            .prev-btn { left: 3% !important; }
            .next-btn, .prev-btn { padding: 14px 20px; font-size: 28px; }

                    /* lblIndicador siempre visible en m칩vil */
            .lblIndicador {
                opacity: 1 !important;
            }

                    /* Icono esquina superior izquierda */
            .icono {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 82px;
            height: 36px;
            z-index: 9999;
            animation: pulse 3.5s infinite; /* efecto de pulso */
            }

            /* Texto esquina superior derecha */
            .lblIndicador {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(23,62,118,0.95);
            color: #fff;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 13px;
            z-index: 9999;
            opacity: 1; /* 游댳 SIEMPRE visible */
            transition: all 0.5s ease;
            }
        }





    </style>
</head>

<body>


                <!-- Icono esquina izquierda -->
            <img src="image.png" 
                alt="icono" 
                class="icono pulse-icon">

            <!-- Texto esquina derecha -->
            <div class="lblIndicador">
            <span>Desliza para descubrir m치s</span>
            </div>
    <div class="flipbook-container"> 
    

        <div class="flipbook">
            <div><img src="Page_1.jpg" alt="P치gina 1"></div>
            <div><img src="Page_2.jpg" alt="P치gina 2"></div>
            <div><img src="Page_3.jpg" alt="P치gina 3"></div>
            <div><img src="Page_4.jpg" alt="P치gina 4"></div>
            <div><img src="Page_5.jpg" alt="P치gina 5"></div>
            <div><img src="Page_6.jpg" alt="P치gina 6"></div>
            <div><img src="Page_7.jpg" alt="P치gina 7"></div>
            <div><img src="Page_8.jpg" alt="P치gina 8"></div>
            <div><img src="Page_9.jpg" alt="P치gina 9"></div>
            <div><img src="Page_10.jpg" alt="P치gina 10"></div>
            <div><img src="Page_11.jpg" alt="P치gina 11"></div>
            <div><img src="Page_12.jpg" alt="P치gina 12"></div>
            <div><img src="Page_13.jpg" alt="P치gina 13"></div>
            <div><img src="Page_14.jpg" alt="P치gina 14"></div>
            <div><img src="Page_15.jpg" alt="P치gina 15"></div>
            <div><img src="Page_16.jpg" alt="P치gina 16"></div>
            <div><img src="Page_17.jpg" alt="P치gina 17"></div>
            <div><img src="Page_18.jpg" alt="P치gina 18"></div>
            <div><img src="Page_19.jpg" alt="P치gina 19"></div>
            <div><img src="Page_20.jpg" alt="P치gina 20"></div>
        </div>

        <div class="controls">
            <button id="prev" class="prev-btn">&#8249;</button>
            <button id="next" class="next-btn">&#8250;</button>
        </div>
    </div>

    <script>
        let isMobile = 0;
        let Paginas1 = 0;
        let Paginas2 = 0;

        function getMagazineSize() {
            const viewportWidth = $(window).width();
            const viewportHeight = $(window).height();
            isMobile = viewportWidth <= 768;

            let width = 0, height = 0, display = 'double';

            if (isMobile) {
                width = viewportWidth * 0.7;
                height = width + 250 * (1100 / 1152);
                display = 'single';
            } else {
                width = viewportWidth * 0.8;
                height = width * (852 / 1152);
                display = 'double';
                if (height > viewportHeight * 0.8) {
                    height = viewportHeight * 0.8;
                    width = (height / 752) * 1152;
                }
            }

            return { width, height, display };
        }

        function resizeMagazine() {
            const newSize = getMagazineSize();
            $('.flipbook').turn('size', newSize.width, newSize.height);
            $('.flipbook').turn('display', newSize.display);
        }

        $(window).ready(function () {
            const initialSize = getMagazineSize();

            $('.flipbook').turn({
                autoCenter: true,
                duration: 900,
                width: initialSize.width,
                height: initialSize.height,
                display: initialSize.display,
                when: {
                    turned: function() {
                        Paginas1 = $(this).turn('view')[0];
                        Paginas2 = $(this).turn('view')[1];

                        if (Paginas1 <= 1) document.getElementById('prev').style.visibility='hidden';
                        else document.getElementById('prev').style.visibility='visible';

                        if (Paginas1 >= 20) document.getElementById('next').style.visibility='hidden';
                        else document.getElementById('next').style.visibility='visible';
                    }
                }
            });

            $(window).bind('keydown', function (e) {
            const totalPages = $(".flipbook").turn("pages");
            switch (e.key) {
            case "ArrowLeft":
            $(".flipbook").turn("previous");
            break;
            case "ArrowRight":
            $(".flipbook").turn("next");
            break;
            case "Home":
            $(".flipbook").turn("page", 1);
            break;
            case "End":
            $(".flipbook").turn("page", totalPages);
            break;
            }
            });

            $(window).bind('resize', resizeMagazine);

            $("#prev").on("click", () => $(".flipbook").turn("previous"));
            $("#next").on("click", () => $(".flipbook").turn("next"));

            // M칩vil: mostrar flechas al tocar y ocultar despu칠s de 2.5s
            if ($(window).width() <= 768) {
                let controlTimeout;

                function showArrows() {
                    $('.flipbook-container').addClass('show-arrows');
                    clearTimeout(controlTimeout);
                    controlTimeout = setTimeout(() => {
                        $('.flipbook-container').removeClass('show-arrows');
                    }, 1500);
                }

                $('.flipbook-container').on('touchstart', showArrows);
            }
        });
    </script>
</body>
</html>
